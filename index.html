<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magnum wings</title>
    <link rel="stylesheet" href="styles1.css">
    <link rel="stylesheet" href="slidetounloock.css">
    <script src="js/slideToUnlock.js"></script>
	<script src="js/model-viewer.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>

</head>
<body>
    
    <img class="logo" src="img/logo.png" alt="Logo">
    
    <div class="clouds">
        <img src="img/cloud1.png" style="--i:1;">
        <img src="img/cloud2.png" style="--i:2;">
        <img src="img/cloud3.png" style="--i:3;">
        <img src="img/cloud4.png" style="--i:4;">
        <img src="img/cloud5.png" style="--i:5;">
    </div>
   <!-- 
    <a-scene>
        <a-assets>
          <a-asset-item id="model" src="../Interface/scene.gltf"></a-asset-item>
        </a-assets>
    
        <a-gltf-model src="#model"></a-gltf-model>
    </a-scene>
-->
    <!--<a-scene>
        <a-assets>
        <a-asset-item id="model" src="../Interface/scene.gltf"></a-asset-item>
        </a-assets>

        <a-entity gltf-model="#model"></a-entity>

        <a-camera position="0 1.6 0"></a-camera>
        <a-light type="ambient" color="#ffffff" intensity="0.5"></a-light>
        <a-light type="directional" position="-5 5 5"></a-light>
    </a-scene>

    <canvas class="webgl"></canvas>
    <script type="module" src="model.js"></script>
    
     3D model Start

    <script async src="https://ga.jspm.io/npm:es-module-shims@1.7.3/dist/es-module-shims.js"></script>
    <script type = "importmap">
        {
            "imports":{
                "three":"https://unpkg.com/three@0.145.0/build/three.module.js"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'https://unpkg.com/three@0.145.0/examples/jsm/controls/OrbitControls.js';
        import {GLTFLoader } from 'https://unpkg.com/three@0.145.0/examples/jsm/loaders/GLTFLoader.js';
        //scene render
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        //our scene
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(white);
        //camera
        const camera = new THREE.PerspectiveCamera(70, window.innerWidth/window.innerHeight, 0.1, 1000);
        camera.position.set(5, 5, 2.5);
        //ambient light
        const ambientLight = new THREE.ambientLight(0xffffff);
        scene.add(ambientLight);
        //controls for orbiting around the objects
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.addEventListener('change', () => { renderer.render(scene, camera) });
        controls.target.set(0,0,0);
        controls.update();
        //load gltf
        const loader = new GLTFLoader();
        loader.load('scene.gltf', function(gltf) {
            const model = gltf.scene;
            model.position.set(0,0,0);
            scene.add(model);

            renderer.render(scene, camera);
        }, undefined, function(error){
            console.error(error);
        }); 


    </script>-->

    <div class="main-image">
        <model-viewer src="scene.gltf" shadow-intensity="1" camera-controls="" auto-rotate="" ar="" ar-status="not-presenting">
		</model-viewer>
    </div>

    <!--Slide to unlock-->
    <script src="slideToUnlock.js"></script>
    <div id="sliderContainer">
        <div id="slider">
            <div id="dragger">
            <div class="arrow"></div>
            </div>
        </div>
        <span id="text">Slide to Unlock</span>
    </div>
    <script>
        var slider = document.getElementById('slider');
    var dragger = document.getElementById('dragger');
    var text = document.getElementById('text');
    var isDragging = false;
    var startPosition = 0;
    var endPosition = 0;
    var sliderContainer = document.getElementById('sliderContainer');
    var maxOffset = sliderContainer.offsetWidth - dragger.offsetWidth;

    dragger.addEventListener('mousedown', startSlide);
    dragger.addEventListener('touchstart', startSlide);

    document.addEventListener('mousemove', moveSlide);
    document.addEventListener('touchmove', moveSlide);

    document.addEventListener('mouseup', endSlide);
    document.addEventListener('touchend', endSlide);

    function startSlide(event) {
    isDragging = true;
    startPosition = event.clientX || event.touches[0].clientX;
    event.preventDefault();
    }

    function moveSlide(event) {
    if (isDragging) {
        var currentPosition = event.clientX || event.touches[0].clientX;
        var distance = currentPosition - startPosition;

        var offset = Math.max(0, Math.min(distance, maxOffset));

        dragger.style.left = offset + 'px';
        slider.style.width = offset + dragger.offsetWidth / 2 + 'px';

        event.preventDefault();
    }
    }

    function endSlide(event) {
    if (isDragging) {
        endPosition = event.clientX || event.changedTouches[0].clientX;
        var distance = endPosition - startPosition;

        var threshold = sliderContainer.offsetWidth / 2;

        if (distance >= threshold) {
        // Navigate to the next page
        window.location.href = 'map.html';
        } else {
        // Reset action
        dragger.style.left = '0';
        slider.style.width = '0';
        text.textContent = 'Slide to Unlock';
        slider.style.backgroundColor = '#e0e0e0';
        }

        isDragging = false;
        event.preventDefault();
    }
    }

    </script>
    <!--End of slide to unlock--> 

</body>
</html>
